{
  "$defs": {
    "AnnotationDef": {
      "description": "A free-text annotation on the diagram.",
      "properties": {
        "text": {
          "description": "Annotation text.",
          "title": "Text",
          "type": "string"
        },
        "position": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Position hint (e.g. 'top-right').",
          "title": "Position"
        }
      },
      "required": [
        "text"
      ],
      "title": "AnnotationDef",
      "type": "object"
    },
    "ConnectionDef": {
      "description": "A connection (edge) between two named resources.",
      "properties": {
        "from": {
          "description": "Source resource name.",
          "examples": [
            "web-app"
          ],
          "title": "From",
          "type": "string"
        },
        "to": {
          "description": "Target resource name.",
          "examples": [
            "prod-db"
          ],
          "title": "To",
          "type": "string"
        },
        "label": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge label text.",
          "title": "Label"
        },
        "style": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge style (e.g. 'dashed').",
          "title": "Style"
        },
        "color": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge color (hex or named).",
          "title": "Color"
        },
        "penwidth": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge pen width.",
          "title": "Penwidth"
        },
        "arrowhead": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arrowhead shape (vee, diamond, etc.).",
          "title": "Arrowhead"
        },
        "arrowtail": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arrowtail shape.",
          "title": "Arrowtail"
        },
        "direction": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge direction (forward, back, both, none).",
          "title": "Direction"
        },
        "minlen": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Minimum edge length.",
          "title": "Minlen"
        },
        "constraint": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Whether edge affects ranking (true/false).",
          "title": "Constraint"
        },
        "style_ref": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Reference to a named connection style preset.",
          "title": "Style Ref"
        }
      },
      "required": [
        "from",
        "to"
      ],
      "title": "ConnectionDef",
      "type": "object"
    },
    "ConnectionStyleDef": {
      "description": "Named reusable connection style preset.",
      "properties": {
        "name": {
          "description": "Preset name for referencing.",
          "examples": [
            "data-flow",
            "auth-flow"
          ],
          "title": "Name",
          "type": "string"
        },
        "color": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge color.",
          "title": "Color"
        },
        "style": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge style (e.g. 'dashed').",
          "title": "Style"
        },
        "penwidth": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Edge pen width.",
          "title": "Penwidth"
        },
        "arrowhead": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Arrowhead shape.",
          "title": "Arrowhead"
        }
      },
      "required": [
        "name"
      ],
      "title": "ConnectionStyleDef",
      "type": "object"
    },
    "DiagramMeta": {
      "description": "Metadata about the diagram.",
      "properties": {
        "name": {
          "default": "Azure Architecture",
          "description": "Diagram display name.",
          "examples": [
            "My Azure Architecture"
          ],
          "title": "Name",
          "type": "string"
        },
        "layout": {
          "default": "auto",
          "description": "Layout engine.",
          "examples": [
            "auto"
          ],
          "title": "Layout",
          "type": "string"
        },
        "direction": {
          "default": "TB",
          "description": "Graph layout direction.",
          "enum": [
            "TB",
            "LR",
            "BT",
            "RL"
          ],
          "examples": [
            "TB",
            "LR"
          ],
          "title": "Direction",
          "type": "string"
        },
        "theme": {
          "default": "default",
          "description": "Visual theme.",
          "enum": [
            "default",
            "light",
            "dark",
            "presentation"
          ],
          "examples": [
            "default",
            "dark"
          ],
          "title": "Theme",
          "type": "string"
        },
        "dpi": {
          "default": 150,
          "description": "Output DPI (72-600).",
          "examples": [
            150,
            300
          ],
          "maximum": 600,
          "minimum": 72,
          "title": "Dpi",
          "type": "integer"
        },
        "legend": {
          "default": false,
          "description": "Auto-generate icon legend.",
          "title": "Legend",
          "type": "boolean"
        },
        "annotations": {
          "description": "Free-text annotations.",
          "items": {
            "$ref": "#/$defs/AnnotationDef"
          },
          "title": "Annotations",
          "type": "array"
        },
        "animation": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "SVG animation type (flow, pulse, build).",
          "title": "Animation"
        },
        "polish": {
          "anyOf": [
            {
              "$ref": "#/$defs/PolishConfig"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Visual polish configuration. Accepts a preset name ('minimal', 'standard', 'premium', 'ultra') or a full configuration object."
        }
      },
      "title": "DiagramMeta",
      "type": "object"
    },
    "GlowConfig": {
      "description": "Configurable glow effect settings.",
      "properties": {
        "enabled": {
          "default": true,
          "description": "Whether glow effects are active.",
          "title": "Enabled",
          "type": "boolean"
        },
        "intensity": {
          "default": 0.8,
          "description": "Glow intensity (0.0-1.0).",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Intensity",
          "type": "number"
        },
        "color": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Glow color override (hex). Defaults to theme accent color.",
          "title": "Color"
        },
        "blur_radius": {
          "default": 10.0,
          "description": "Glow blur radius in pixels (0-50).",
          "maximum": 50.0,
          "minimum": 0.0,
          "title": "Blur Radius",
          "type": "number"
        },
        "layers": {
          "default": 2,
          "description": "Number of layered glow passes (1-4).",
          "maximum": 4,
          "minimum": 1,
          "title": "Layers",
          "type": "integer"
        }
      },
      "title": "GlowConfig",
      "type": "object"
    },
    "GradientConfig": {
      "description": "Cluster/node gradient settings.",
      "properties": {
        "enabled": {
          "default": true,
          "description": "Whether gradient fills are active.",
          "title": "Enabled",
          "type": "boolean"
        },
        "style": {
          "default": "azure",
          "description": "Gradient style. 'azure' uses official Azure design gradients.",
          "enum": [
            "linear",
            "radial",
            "azure"
          ],
          "title": "Style",
          "type": "string"
        },
        "intensity": {
          "default": 0.6,
          "description": "Gradient intensity/opacity (0.0-1.0).",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Intensity",
          "type": "number"
        }
      },
      "title": "GradientConfig",
      "type": "object"
    },
    "IconQualityConfig": {
      "description": "Icon rendering quality settings.",
      "properties": {
        "sharpening": {
          "default": true,
          "description": "Apply sharpening filter to icons.",
          "title": "Sharpening",
          "type": "boolean"
        },
        "glow": {
          "default": true,
          "description": "Apply subtle ambient glow to icons.",
          "title": "Glow",
          "type": "boolean"
        },
        "glow_intensity": {
          "default": 0.3,
          "description": "Icon glow intensity (0.0-1.0).",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Glow Intensity",
          "type": "number"
        }
      },
      "title": "IconQualityConfig",
      "type": "object"
    },
    "NodeStyle": {
      "description": "Per-node visual overrides for custom styling.",
      "properties": {
        "color": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Fill color (CSS/hex).",
          "title": "Color"
        },
        "shape": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Graphviz shape (box, ellipse, etc.).",
          "title": "Shape"
        },
        "border": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Border style (e.g. 'dashed').",
          "title": "Border"
        },
        "fontcolor": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Label font color.",
          "title": "Fontcolor"
        }
      },
      "title": "NodeStyle",
      "type": "object"
    },
    "PolishConfig": {
      "description": "Full visual polish configuration.\n\nCan be specified as a preset name string (``minimal``, ``standard``,\n``premium``, ``ultra``) or as a full configuration object with granular\noverrides.  When a preset is given, it is expanded to its defaults\nbefore any overrides are applied.",
      "properties": {
        "preset": {
          "default": "standard",
          "description": "Base polish preset that sets defaults for all sub-settings.",
          "enum": [
            "minimal",
            "standard",
            "premium",
            "ultra"
          ],
          "title": "Preset",
          "type": "string"
        },
        "glow": {
          "$ref": "#/$defs/GlowConfig",
          "description": "Glow effect configuration."
        },
        "shadow": {
          "$ref": "#/$defs/ShadowConfig",
          "description": "Shadow / 3D depth configuration."
        },
        "gradient": {
          "$ref": "#/$defs/GradientConfig",
          "description": "Gradient fill configuration."
        },
        "icon_quality": {
          "$ref": "#/$defs/IconQualityConfig",
          "description": "Icon rendering quality."
        },
        "glassmorphism": {
          "default": 0.45,
          "description": "Glassmorphism fill-opacity for clusters (0.0-1.0).",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Glassmorphism",
          "type": "number"
        },
        "text_halo": {
          "default": true,
          "description": "Subtle text halo for readability on dark backgrounds.",
          "title": "Text Halo",
          "type": "boolean"
        }
      },
      "title": "PolishConfig",
      "type": "object"
    },
    "ResourceDef": {
      "description": "A single resource, optionally containing child resources.",
      "properties": {
        "type": {
          "description": "Resource type identifier (e.g. 'azure/app-service').",
          "examples": [
            "azure/app-service",
            "azure/vm",
            "aws/ec2"
          ],
          "title": "Type",
          "type": "string"
        },
        "name": {
          "description": "Unique display name for this resource.",
          "examples": [
            "web-app",
            "prod-db"
          ],
          "title": "Name",
          "type": "string"
        },
        "children": {
          "description": "Nested child resources (rendered inside a cluster).",
          "items": {
            "$ref": "#/$defs/ResourceDef"
          },
          "title": "Children",
          "type": "array"
        },
        "metadata": {
          "additionalProperties": {
            "type": "string"
          },
          "description": "Arbitrary key-value metadata (SKU, cost, owner).",
          "title": "Metadata",
          "type": "object"
        },
        "style": {
          "anyOf": [
            {
              "$ref": "#/$defs/NodeStyle"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Per-node visual overrides."
        }
      },
      "required": [
        "type",
        "name"
      ],
      "title": "ResourceDef",
      "type": "object"
    },
    "ShadowConfig": {
      "description": "3D depth / shadow effect settings.",
      "properties": {
        "enabled": {
          "default": true,
          "description": "Whether shadow/depth effects are active.",
          "title": "Enabled",
          "type": "boolean"
        },
        "elevation": {
          "default": 2,
          "description": "Elevation level (0=flat, 4=highest).",
          "enum": [
            0,
            1,
            2,
            3,
            4
          ],
          "title": "Elevation",
          "type": "integer"
        },
        "color": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Shadow color override (hex).",
          "title": "Color"
        },
        "opacity": {
          "default": 0.3,
          "description": "Shadow opacity (0.0-1.0).",
          "maximum": 1.0,
          "minimum": 0.0,
          "title": "Opacity",
          "type": "number"
        }
      },
      "title": "ShadowConfig",
      "type": "object"
    },
    "ZoneDef": {
      "description": "A swimlane / zone grouping resources.",
      "properties": {
        "name": {
          "description": "Zone display name.",
          "title": "Name",
          "type": "string"
        },
        "resources": {
          "description": "Resource names belonging to this zone.",
          "items": {
            "type": "string"
          },
          "title": "Resources",
          "type": "array"
        },
        "style": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "description": "Zone style preset (dmz, private, public).",
          "title": "Style"
        }
      },
      "required": [
        "name"
      ],
      "title": "ZoneDef",
      "type": "object"
    }
  },
  "description": "Schema for redspec YAML architecture diagram files.",
  "properties": {
    "diagram": {
      "$ref": "#/$defs/DiagramMeta",
      "description": "Diagram metadata (name, theme, direction, etc.)."
    },
    "resources": {
      "description": "Top-level resources.",
      "items": {
        "$ref": "#/$defs/ResourceDef"
      },
      "title": "Resources",
      "type": "array"
    },
    "connections": {
      "description": "Connections between resources.",
      "items": {
        "$ref": "#/$defs/ConnectionDef"
      },
      "title": "Connections",
      "type": "array"
    },
    "variables": {
      "additionalProperties": {
        "type": "string"
      },
      "description": "Variable definitions for ${key} interpolation.",
      "title": "Variables",
      "type": "object"
    },
    "connection_styles": {
      "description": "Named reusable connection style presets.",
      "items": {
        "$ref": "#/$defs/ConnectionStyleDef"
      },
      "title": "Connection Styles",
      "type": "array"
    },
    "zones": {
      "description": "Swimlane / zone groupings.",
      "items": {
        "$ref": "#/$defs/ZoneDef"
      },
      "title": "Zones",
      "type": "array"
    }
  },
  "title": "Redspec Diagram Specification",
  "type": "object",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://redspec.dev/schemas/redspec-spec.json"
}
